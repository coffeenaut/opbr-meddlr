import{r as a,i as D,s as b,w as j,a as O,u as M,b as I,c as N,d as T,e as k,j as s,g as H,D as E,f as F,G as Z,h as U,S as A}from"./index-a732cb4c.js";function $({title:n,titleId:e,...r},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":e},r),n?a.createElement("title",{id:e},n):null,a.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}const G=a.forwardRef($),_=G;function B(n){return a.useMemo(()=>n.hooks.dragSource(),[n])}function L(n){return a.useMemo(()=>n.hooks.dragPreview(),[n])}let S=!1,C=!1;class z{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){D(!S,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return S=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{S=!1}}isDragging(){if(!this.sourceId)return!1;D(!C,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return C=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{C=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class K{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,t=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(t&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!b(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!b(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=j({dragSource:(r,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,O(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,O(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}function Y(n,e){const r=M(),t=a.useMemo(()=>new K(r.getBackend()),[r]);return I(()=>(t.dragSourceOptions=n||null,t.reconnect(),()=>t.disconnectDragSource()),[t,n]),I(()=>(t.dragPreviewOptions=e||null,t.reconnect(),()=>t.disconnectDragPreview()),[t,e]),t}function q(){const n=M();return a.useMemo(()=>new z(n),[n])}class J{beginDrag(){const e=this.spec,r=this.monitor;let t=null;return typeof e.item=="object"?t=e.item:typeof e.item=="function"?t=e.item(r):t={},t??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const t=this.spec,o=this.monitor,{isDragging:l}=t;return l?l(o):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,t=this.connector,{end:o}=e;o&&o(r.getItem(),r),t.reconnect()}constructor(e,r,t){this.spec=e,this.monitor=r,this.connector=t}}function Q(n,e,r){const t=a.useMemo(()=>new J(n,e,r),[e,r]);return a.useEffect(()=>{t.spec=n},[n]),t}function V(n){return a.useMemo(()=>{const e=n.type;return D(e!=null,"spec.type must be defined"),e},[n])}function W(n,e,r){const t=M(),o=Q(n,e,r),l=V(n);I(function(){if(l!=null){const[u,g]=N(l,o,t);return e.receiveHandlerId(u),r.receiveHandlerId(u),g}},[t,e,r,o,l])}function X(n,e){const r=T(n,e);D(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const t=q(),o=Y(r.options,r.previewOptions);return W(r,t,o),[k(r.collect,t,o),B(o),L(o)]}function ee({title:n,titleId:e,...r},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":e},r),n?a.createElement("title",{id:e},n):null,a.createElement("path",{d:"M10 3.75a2 2 0 1 0-4 0 2 2 0 0 0 4 0ZM17.25 4.5a.75.75 0 0 0 0-1.5h-5.5a.75.75 0 0 0 0 1.5h5.5ZM5 3.75a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 .75.75ZM4.25 17a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5ZM17.25 17a.75.75 0 0 0 0-1.5h-5.5a.75.75 0 0 0 0 1.5h5.5ZM9 10a.75.75 0 0 1-.75.75h-5.5a.75.75 0 0 1 0-1.5h5.5A.75.75 0 0 1 9 10ZM17.25 10.75a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5ZM14 10a2 2 0 1 0-4 0 2 2 0 0 0 4 0ZM10 16.25a2 2 0 1 0-4 0 2 2 0 0 0 4 0Z"}))}const re=a.forwardRef(ee),te=re,ne=n=>{const e="opbr-meddlr",r=n.medal,[{isDragging:t},o]=X(()=>({type:"medal",item:{medal:r},end:(d,u)=>{const g=u.getDropResult();if(d&&g){let p=[],f=[];for(let c=0;c<3;c++){let m=E(2,0),v=d.medal.extra_traits[m],w=H(v);p.push(m),f.push(w.max)}let i=d.medal;i.set_traits=p,i.set_traits_values=f,n.onDrop(i,g)}},collect:d=>({isDragging:d.isDragging(),handlerId:d.getHandlerId()})})),l=t&&"dragging";return s.jsx("img",{ref:o,className:`medal-image rounded-full ${l}`,src:`/${e}/medals/${r.image}.png`,title:r.name})},ae=n=>{const e=Z(),[r,t]=a.useState([...Array(e.length).keys()].map(i=>i+4)),o=a.useRef(null);function l(i){t([...i])}const d=i=>{const[c,m]=a.useState(!1),[v,w]=a.useState(U()),[ie,P]=a.useState(!1);function x(){m(!c)}function y(h){h.sub?w(h.sub):i.filterMedal(h.medals)}return s.jsxs(s.Fragment,{children:[s.jsx(te,{onClick:x,className:"icon-medium-grey cursor-pointer"}),s.jsx("div",{className:`flex flex-col rounded-md absolute filter-drop cursor-pointer max-h-60 overflow-y-auto gap-y-2 ${c?"showdrop":""}`,children:v.map((h,R)=>s.jsx(s.Fragment,{children:s.jsx("div",{className:"capitalize}",onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),onClick:()=>y(h),children:h.Category},R)}))})]})},u=i=>{i.keyCode===13&&f()};function g(){t([...Array(e.length).keys()].map(i=>i+4))}function p(i){return r.indexOf(i)>-1}function f(){let i=o.current.value,c=[];i?c=A(i):console.log("nothing"),c.length>0?t([...c]):g()}return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex p-2 justify-between",children:[s.jsxs("div",{className:"flex w-3/4 lg:w-1/2 search",children:[s.jsx("input",{ref:o,onKeyDown:u,className:"w-full rounded-lg form-input",type:"text",placeholder:"search medals"}),s.jsx(_,{className:"-translate-x-9 translate-y-1 icon-medium-grey cursor-pointer",onClick:f})]}),s.jsx("div",{className:"filter",children:s.jsx(d,{filterMedal:l})})]}),s.jsx("div",{className:"grid grid-cols-3 lg:grid-cols-5 xl:grid-cols-6 gap-4 max-h-[225px] md:max-h-[450px] lg:max-h-[640px] medal-list",children:e.map((i,c)=>!F(i)&&s.jsx("div",{className:`${p(c)?"show spin-medal":"hide"}`,children:s.jsx(ne,{onDrop:n.dropped,medal:i},c)}))})]})})};export{ae as default};
